[{"C:\\Users\\bretb\\projects\\beau-app\\src\\index.js":"1","C:\\Users\\bretb\\projects\\beau-app\\src\\App.js":"2","C:\\Users\\bretb\\projects\\beau-app\\src\\reportWebVitals.js":"3","C:\\Users\\bretb\\projects\\caption_search\\src\\index.js":"4","C:\\Users\\bretb\\projects\\caption_search\\src\\App.js":"5","C:\\Users\\bretb\\projects\\caption_search\\src\\reportWebVitals.js":"6"},{"size":500,"mtime":499162500000,"results":"7","hashOfConfig":"8"},{"size":3362,"mtime":1610503476457,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":499162500000,"results":"10","hashOfConfig":"8"},{"size":500,"mtime":499162500000,"results":"11","hashOfConfig":"12"},{"size":3362,"mtime":1610553892823,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":499162500000,"results":"14","hashOfConfig":"12"},{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"17"},"11bimw4",{"filePath":"18","messages":"19","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"17"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"or24i4",{"filePath":"25","messages":"26","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"24"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\bretb\\projects\\beau-app\\src\\index.js",[],["30","31"],"C:\\Users\\bretb\\projects\\beau-app\\src\\App.js",["32","33","34"],"C:\\Users\\bretb\\projects\\beau-app\\src\\reportWebVitals.js",[],"C:\\Users\\bretb\\projects\\caption_search\\src\\index.js",[],["35","36"],"C:\\Users\\bretb\\projects\\caption_search\\src\\App.js",["37","38","39"],"import logo from './logo.svg'\nimport './App.css'\nimport React, {Component} from 'react'\nimport Search from './reverse_index.json'\nconst natural = require('natural') \n\nconsole.log(Object.keys(Search))\n\nlet top100 = Search.globalCount\nconsole.log('search', Search.search)\nconsole.log('autocomplete', Search.autoComplete)\nconsole.log('top results', top100)\n\nclass App extends React.Component { \n  constructor(props) { \n    super(props)\n    this.state = {\n      currentTerms: '',\n      search: Search.search,\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({currentTerms: e.target.value})\n  }\n\n  search = (terms) => {\n    const {search} = this.state\n    let results = [...new Set(terms.replace(/'/g, '').split(' '))]\n      .map(x => search[natural.PorterStemmer.stem(x)])\n      .filter(x => x !== undefined)\n    // TODO: aggregate the results\n    console.log(results)\n    if (results !== undefined && results !== null) {\n    }\n    if (results.length !== 0) {\n      let aggregates = {}\n      results.forEach(x => {\n        x.forEach(({title, count, url}) => {\n          if (aggregates[title]) {\n            aggregates[title].count += count\n            aggregates[title].hits += 1\n          } else {\n            aggregates[title] = {title, count, hits:1, url}\n          }\n        })\n      })\n      results = Object.values(aggregates).sort((a, b) => \n        a.hits < b.hits ? 1\n        : a.hits > b.hits ? -1\n        : a.count < b.count ? 1\n        : a.count > b.count ? -1\n        : 0\n      )\n    }\n    return results\n  }\n\n  complete = (terms) => {\n    if (terms === undefined) {\n      return ''\n    }\n    terms = terms.split(' ').slice(-1).split('')\n    console.log('terms', terms)\n    let cur = Search.autoComplete\n    let pref = ''\n    terms.forEach(x => {cur = cur.children[x]; pref += x})\n    if (cur === undefined) {\n      return []\n    }\n    while (cur !== undefined && !cur.ends) {\n      let next = Object.entries(cur.children)\n        .sort(([k,v],[k2, v2]) => \n          v.weight > v2.weight ? -1\n          : v.weight < v2.weight ? 1\n          :0)[0]\n      cur = cur.children[next[0]]\n      pref = pref.concat(next[0])\n    }\n    return pref\n  }\n  \n  render = () => { \n    const {currentTerms, search} = this.state\n    const {onChange} = this\n    let results = currentTerms\n    let complete = ''\n    if (results === '') {\n      results = [] \n    } else {\n      results = this.search(currentTerms)\n    } //let complete =this.complete(currentTerms) let complete = '' console.log()\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div style={{backgroundColor:'none', opacity:'100%'}}>\n            <h1>Beau Index Search</h1>\n            <h1>?</h1>\n            <input style={{width: '600px', fontSize:'16pt', textAlign:'center'}} type='text' onChange={onChange}></input>\n            <div>{complete}</div>\n            {results.length !== 0 && <table className='results'>\n              <tbody>\n                {results.slice(0,7).map(x => \n                  <tr key={x.title}>\n                    <td onClick={() => window.open('https://www.youtube.com/watch?v=' + x.url, '_blank')}>\n                      {x.title}\n                    </td>\n                  </tr>)}\n              </tbody>\n            </table>\n            }\n          </div>\n        </header>\n      </div>\n    )\n  }\n            \n}\nexport default App;\n","C:\\Users\\bretb\\projects\\caption_search\\src\\reportWebVitals.js",[],{"ruleId":"40","replacedBy":"41"},{"ruleId":"42","replacedBy":"43"},{"ruleId":"44","severity":1,"message":"45","line":1,"column":8,"nodeType":"46","messageId":"47","endLine":1,"endColumn":12},{"ruleId":"44","severity":1,"message":"48","line":3,"column":16,"nodeType":"46","messageId":"47","endLine":3,"endColumn":25},{"ruleId":"44","severity":1,"message":"49","line":84,"column":26,"nodeType":"46","messageId":"47","endLine":84,"endColumn":32},{"ruleId":"40","replacedBy":"50"},{"ruleId":"42","replacedBy":"51"},{"ruleId":"44","severity":1,"message":"45","line":1,"column":8,"nodeType":"46","messageId":"47","endLine":1,"endColumn":12},{"ruleId":"44","severity":1,"message":"48","line":3,"column":16,"nodeType":"46","messageId":"47","endLine":3,"endColumn":25},{"ruleId":"44","severity":1,"message":"49","line":84,"column":26,"nodeType":"46","messageId":"47","endLine":84,"endColumn":32},"no-native-reassign",["52"],"no-negated-in-lhs",["53"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'Component' is defined but never used.","'search' is assigned a value but never used.",["52"],["53"],"no-global-assign","no-unsafe-negation"]